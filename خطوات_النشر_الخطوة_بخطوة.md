# ๐ ุฎุทูุงุช ุงููุดุฑ - ุฎุทูุฉ ุจุฎุทูุฉ

## โ ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ GitHub Secrets (ููู ุฌุฏุงู!)

### ุฃ) ุฅูุดุงุก SSH Key:

ุงูุชุญ **PowerShell** ุฃู **Command Prompt** ูุงูุชุจ:

```bash
# ุฅูุดุงุก SSH Key ุฌุฏูุฏ
ssh-keygen -t ed25519 -C "github-actions"

# ุงุถุบุท Enter ูููุจูู ุนูู ูู ุงูุฃุณุฆูุฉ (ุฃู ุงูุชุจ ูุณุงุฑ ูุฎุชูู)
# **ููู**: ูุง ุชูุชุจ ูููุฉ ูุฑูุฑ (ุงุถุบุท Enter ููุท)
```

### ุจ) ูุณุฎ ุงูููุชุงุญ ุงูุนุงู ููุณูุฑูุฑ:

```bash
# ูุณุฎ ุงูููุชุงุญ ููุณูุฑูุฑ (ุงุณุชุจุฏู root@153.92.223.119 ุจูุนูููุงุชู)
type C:\Users\pc\.ssh\id_ed25519.pub | ssh root@153.92.223.119 "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys"
```

ุฃู ูุฏููุงู:
1. ุงูุชุญ ุงูููู: `C:\Users\pc\.ssh\id_ed25519.pub`
2. ุงูุณุฎ ูู ุงููุญุชูู
3. ุงุชุตู ุจุงูุณูุฑูุฑ: `ssh root@153.92.223.119`
4. ุงูุชุจ: `nano ~/.ssh/authorized_keys`
5. ุงูุตู ุงูููุชุงุญ ูุงุญูุธ

### ุฌ) ูุณุฎ ุงูููุชุงุญ ุงูุฎุงุต ุฅูู GitHub:

1. ุงูุชุญ ุงูููู: `C:\Users\pc\.ssh\id_ed25519`
2. **ุงูุณุฎ ูู ุงููุญุชูู** (ุจูุง ููู `-----BEGIN` ู `-----END`)
3. ุงุฐูุจ ุฅูู: https://github.com/elhenawym124-ops/max_p_new/settings/secrets/actions
4. ุงุถุบุท **"New repository secret"**
5. ุฃุถู ูุฐู ุงูู Secrets:

   **Secret 1:**
   - Name: `SERVER_HOST`
   - Value: `153.92.223.119`

   **Secret 2:**
   - Name: `SERVER_USER`
   - Value: `root`

   **Secret 3:**
   - Name: `SERVER_SSH_KEY`
   - Value: (ุงูุตู ูุญุชูู ุงูููู `id_ed25519` ูุงููุงู)

   **Secret 4 (ุงุฎุชูุงุฑู):**
   - Name: `SERVER_PORT`
   - Value: `22`

---

## โ ุงูุฎุทูุฉ 2: ุฑูุน ุงููููุงุช ุนูู GitHub

ุงูุชุญ **PowerShell** ูู ูุฌูุฏ ุงููุดุฑูุน ูุงูุชุจ:

```bash
# ุงูุชุญูู ูู ุญุงูุฉ Git
git status

# ุฅุถุงูุฉ ุฌููุน ุงููููุงุช
git add .

# ุนูู Commit
git commit -m "Add deployment configuration"

# ุฑูุน ุนูู GitHub
git push origin main
```

---

## โ ุงูุฎุทูุฉ 3: ูุฑุงูุจุฉ ุงููุดุฑ

ุจุนุฏ ุงูู push:

1. ุงุฐูุจ ุฅูู: https://github.com/elhenawym124-ops/max_p_new/actions
2. ุณุชุฌุฏ workflow ุงุณูู **"Deploy to Server"** ูุนูู
3. ุงุถุบุท ุนููู ูุชุฑู ุงูุชูุงุตูู
4. ุงูุชุธุฑ ุญุชู ููุชูู (ุนูุงูุฉ โ ุฎุถุฑุงุก)

---

## โ ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุงููุดุฑ

ุงุชุตู ุจุงูุณูุฑูุฑ ูุชุญูู:

```bash
ssh root@153.92.223.119

# ุงูุชุญูู ูู ูุฌูุฏ ุงููููุงุช
ls -la /var/www/frontend2/dist
ls -la /var/www/backend2

# ุงูุชุญูู ูู PM2
pm2 list
pm2 logs 0
```

---

## ๐ง ุฅุฐุง ูุงุฌูุช ูุดุงูู:

### ูุดููุฉ: "Permission denied"
```bash
# ุนูู ุงูุณูุฑูุฑ
chmod 600 ~/.ssh/authorized_keys
chmod 700 ~/.ssh
```

### ูุดููุฉ: "Connection refused"
- ุชุฃูุฏ ูู ุฃู SSH ูุนูู ุนูู ุงูุณูุฑูุฑ
- ุชุฃูุฏ ูู `SERVER_HOST` ู `SERVER_PORT` ุตุญูุญูู

### ูุดููุฉ: "npm ci failed"
```bash
# ุนูู ุงูุณูุฑูุฑ
cd /var/www/backend2
rm -rf node_modules package-lock.json
npm install
```

---

## ๐ ููุงุญุธุงุช ูููุฉ:

1. **ุจุนุฏ ูู push ุนูู `main`** โ ุงููุดุฑ ูุญุฏุซ ุชููุงุฆูุงู
2. **ููููู ุชุดุบูู ุงููุดุฑ ูุฏููุงู** ูู ุตูุญุฉ Actions โ "Run workflow"
3. **ุงููููุงุช ุชููุณุฎ ุชููุงุฆูุงู** ูู GitHub ุฅูู ุงูุณูุฑูุฑ
4. **PM2 ูุนูุฏ ุงูุชุดุบูู ุชููุงุฆูุงู** ุจุนุฏ ุงููุณุฎ

---

## ๐ฏ ููุฎุต ุณุฑูุน:

1. โ ุฃูุดุฆ SSH Key
2. โ ุงูุณุฎ ุงูููุชุงุญ ุงูุนุงู ููุณูุฑูุฑ
3. โ ุฃุถู Secrets ูู GitHub
4. โ ุงุฑูุน ุงููููุงุช: `git push origin main`
5. โ ุฑุงูุจ ุงููุดุฑ ูู ุตูุญุฉ Actions

**ูุฐุง ูู ุดูุก! ๐**

