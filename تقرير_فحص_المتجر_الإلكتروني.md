# ุชูุฑูุฑ ูุญุต ุงููุชุฌุฑ ุงูุฅููุชุฑููู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ูุญุต ุงูููุฏ ุงูุฎุงุต ุจุงููุชุฌุฑ ุงูุฅููุชุฑููู ูู ุงููุดุฑูุน. ุงููุธุงู ูุจูู ุนูู:
- **Frontend**: React + TypeScript
- **Backend**: Node.js + Express + Prisma
- **Database**: Prisma ORM

---

## ๐๏ธ ุงูุจููุฉ ุงููุนูุงุฑูุฉ

### 1. Frontend (ูุงุฌูุฉ ุงููุณุชุฎุฏู)

#### ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ (`frontend/src/pages/storefront/`):
- **Shop.tsx**: ุตูุญุฉ ุนุฑุถ ุงูููุชุฌุงุช ุงูุฑุฆูุณูุฉ
- **ProductDetails.tsx**: ุตูุญุฉ ุชูุงุตูู ุงูููุชุฌ
- **Cart.tsx**: ุตูุญุฉ ุณูุฉ ุงูุชุณูู
- **Checkout.tsx**: ุตูุญุฉ ุฅุชูุงู ุงูุทูุจ
- **OrderConfirmation.tsx**: ุตูุญุฉ ุชุฃููุฏ ุงูุทูุจ
- **TrackOrder.tsx**: ุตูุญุฉ ุชุชุจุน ุงูุทูุจ

#### ุงูููููุงุช (`frontend/src/components/storefront/`):
- **StorefrontNav.tsx**: ุดุฑูุท ุงูุชููู ูููุชุฌุฑ
- **StorefrontHeader.tsx**: ุฑุฃุณ ุงูุตูุญุฉ
- **Checkout.tsx**: ูููู ุฅุชูุงู ุงูุทูุจ
- **OrderConfirmation.tsx**: ูููู ุชุฃููุฏ ุงูุทูุจ
- **TrackOrder.tsx**: ูููู ุชุชุจุน ุงูุทูุจ

#### ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ (`frontend/src/utils/`):
- **storefrontApi.ts**: API helper ููุงุชุตุงู ุจุงูู Backend
- **storeUrl.ts**: ูุณุงุนุฏ ูุจูุงุก ุฑูุงุจุท ุงููุชุฌุฑ

---

### 2. Backend (ุงูุฎุงุฏู)

#### Routes ุงูุฑุฆูุณูุฉ (`backend/routes/`):

##### 1. **publicProductsRoutes.js**
- `GET /products` - ุฌูุจ ุฌููุน ุงูููุชุฌุงุช (ูุน ููุชุฑุฉ ูุชุฑุชูุจ)
- `GET /products/:id` - ุฌูุจ ุชูุงุตูู ููุชุฌ ูุนูู
- `GET /categories` - ุฌูุจ ุฌููุน ุงููุฆุงุช
- `GET /categories/:id` - ุฌูุจ ูุฆุฉ ูุนููุฉ
- `GET /store-info` - ูุนูููุงุช ุงููุชุฌุฑ
- `GET /featured-products` - ุงูููุชุฌุงุช ุงููููุฒุฉ

##### 2. **publicCartRoutes.js**
- `GET /cart` - ุฌูุจ ุงูุณูุฉ
- `POST /cart/add` - ุฅุถุงูุฉ ููุชุฌ ููุณูุฉ
- `PUT /cart/update` - ุชุญุฏูุซ ูููุฉ ููุชุฌ ูู ุงูุณูุฉ
- `DELETE /cart/remove` - ุญุฐู ููุชุฌ ูู ุงูุณูุฉ
- `DELETE /cart/clear` - ูุณุญ ุงูุณูุฉ ุจุงููุงูู
- `GET /shipping/calculate` - ุญุณุงุจ ุชูููุฉ ุงูุดุญู
- `GET /payment-methods` - ุทุฑู ุงูุฏูุน ุงููุชุงุญุฉ

##### 3. **publicOrdersRoutes.js**
- `POST /orders` - ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
- `GET /orders/track` - ุชุชุจุน ุงูุทูุจ ุจุฑูู ุงูุทูุจ ูุงููุงุชู
- `GET /orders/:id` - ุฌูุจ ุชูุงุตูู ุทูุจ
- `PATCH /orders/:orderNumber/status` - ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ
- `PATCH /orders/:orderNumber/payment-status` - ุชุญุฏูุซ ุญุงูุฉ ุงูุฏูุน

---

## โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช
- โ ุนุฑุถ ุงูููุชุฌุงุช ูุน ููุชุฑุฉ ุญุณุจ ุงููุฆุฉ
- โ ุงูุจุญุซ ูู ุงูููุชุฌุงุช
- โ ุชุฑุชูุจ ุงูููุชุฌุงุช (ุญุณุจ ุงูุณุนุฑุ ุงูุชุงุฑูุฎุ ุงูุงุณู)
- โ ุนุฑุถ ุงูููุชุฌุงุช ุงููููุฒุฉ
- โ ุฏุนู ูุชุบูุฑุงุช ุงูููุชุฌุงุช (Variants)
- โ ุฅุฏุงุฑุฉ ุงููุฎุฒูู
- โ ุนุฑุถ ุงูุตูุฑ (ุฏุนู ุตูุฑ ูุชุนุฏุฏุฉ)
- โ ุฏุนู ุงูุฃุณุนุงุฑ ุงูููุงุฑูุฉ (comparePrice)

### 2. ุณูุฉ ุงูุชุณูู
- โ ุฅุถุงูุฉ/ุญุฐู/ุชุญุฏูุซ ุงูููุชุฌุงุช
- โ ุญูุธ ุงูุณูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (GuestCart)
- โ ุงุณุชุฎุฏุงู Cookies ููุชุนุฑู ุนูู ุงูุณูุฉ
- โ ุญุณุงุจ ุงูุฅุฌูุงูู ุชููุงุฆูุงู
- โ ุนุฑุถ ุดุฑูุท ุชูุฏู ุงูุดุญู ุงููุฌุงูู

### 3. ุฅุชูุงู ุงูุทูุจ
- โ ูููุฐุฌ ุฅุชูุงู ุงูุทูุจ ูุน ุฅุนุฏุงุฏุงุช ูุงุจูุฉ ููุชุฎุตูุต
- โ ุญุณุงุจ ุชูููุฉ ุงูุดุญู ุญุณุจ ุงููุญุงูุธุฉ
- โ ุฏุนู ุฎูุงุฑุงุช ุงูุชูุตูู (Delivery Options)
- โ ุทุฑู ุงูุฏูุน (ุงูุฏูุน ุนูุฏ ุงูุงุณุชูุงู)
- โ ุชุทุจูู ููุจููุงุช ุงูุฎุตู
- โ ุชุญุฏูุซ ุงููุฎุฒูู ุชููุงุฆูุงู ุจุนุฏ ุงูุทูุจ

### 4. ุชุชุจุน ุงูุทูุจุงุช
- โ ุชุชุจุน ุงูุทูุจ ุจุฑูู ุงูุทูุจ ูุฑูู ุงููุงุชู
- โ ุนุฑุถ ุญุงูุฉ ุงูุทูุจ
- โ ุนุฑุถ ุชูุงุตูู ุงูุทูุจ ุงููุงููุฉ

### 5. ุงูููุฒุงุช ุงูุฅุถุงููุฉ
- โ ุฏุนู ุงูุดุญู ุงููุฌุงูู ุนูุฏ ุงููุตูู ูุญุฏ ุฃุฏูู
- โ ุฎุตููุงุช ุงููููุฉ (Volume Discounts)
- โ ููุชุฌุงุช ุฐุงุช ุตูุฉ (Related Products)
- โ ููุชุฌุงุช ูุดุชุฑุงุฉ ูุนุงู (Frequently Bought Together)
- โ ุฏุนู Subdomain ููู ุดุฑูุฉ
- โ ุนุฒู ุงูุจูุงูุงุช ุญุณุจ ุงูุดุฑูุฉ (Company Isolation)

---

## ๐ ููุงุท ุงูููุฉ

1. **ุจููุฉ ููุธูุฉ**: ุงูููุฏ ููุธู ุจุดูู ุฌูุฏ ูุน ูุตู ูุงุถุญ ุจูู Frontend ู Backend
2. **ุฃูุงู**: ุนุฒู ุงูุจูุงูุงุช ุญุณุจ ุงูุดุฑูุฉุ ุงุณุชุฎุฏุงู Cookies ุขููุฉ
3. **ูุฑููุฉ**: ุฏุนู ุทุฑู ูุชุนุฏุฏุฉ ูููุตูู ูููุชุฌุฑ (URL parameter, Subdomain)
4. **ุชุฌุฑุจุฉ ูุณุชุฎุฏู**: ูุงุฌูุฉ ูุณุชุฎุฏู ุญุฏูุซุฉ ูุน ุฏุนู RTL ููุนุฑุจูุฉ
5. **ุฅุฏุงุฑุฉ ุงููุฎุฒูู**: ุชุญุฏูุซ ุงููุฎุฒูู ุชููุงุฆูุงู ุนูุฏ ุงูุทูุจ
6. **ุชุชุจุน ุงูุทูุจุงุช**: ูุธุงู ุชุชุจุน ุดุงูู ููุทูุจุงุช

---

## โ๏ธ ููุงุท ุชุญุชุงุฌ ุชุญุณูู

### 1. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุจุนุถ ุงูุฃุฎุทุงุก ูุง ูุชู ูุนุงูุฌุชูุง ุจุดูู ูุงูู
- ุชุญุชุงุฌ ุฑุณุงุฆู ุฎุทุฃ ุฃูุซุฑ ูุถูุญุงู ูููุณุชุฎุฏู

### 2. ุงูุฃุฏุงุก
- ูููู ุชุญุณูู ุฃุฏุงุก ุฌูุจ ุงูููุชุฌุงุช ุจุงุณุชุฎุฏุงู Caching
- ุชุญุณูู ุชุญููู ุงูุตูุฑ (Lazy Loading)

### 3. ุงูุฃูุงู
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ุงููุฏุฎูุฉ ูุญุชุงุฌ ุชุญุณูู
- ุญูุงูุฉ ุฃูุถู ุถุฏ SQL Injection (ุฑุบู ุงุณุชุฎุฏุงู Prisma)

### 4. ุงูุงุฎุชุจุงุฑุงุช
- ูุง ุชูุฌุฏ ุงุฎุชุจุงุฑุงุช Unit Tests ุฃู Integration Tests
- ููุถู ุฅุถุงูุฉ ุงุฎุชุจุงุฑุงุช ูููุธุงุฆู ุงูุญุฑุฌุฉ

### 5. ุงูุชูุซูู
- ุงูููุฏ ูุญุชุงุฌ ุชูุซูู ุฃูุถู ููุฏูุงู ุงููุนูุฏุฉ
- ุฅุถุงูุฉ JSDoc comments

---

## ๐ ูุดุงูู ูุญุชููุฉ

### 1. ูู `publicCartRoutes.js`:
```javascript
// ุงูุณุทุฑ 25: ูุฏ ูููู cartId undefined
if (!cartId || cartId === 'undefined') {
  cartId = uuidv4();
}
```
**ุงูุญู**: ุงูุชุญูู ุจุดูู ุฃูุถู ูู ุตุญุฉ cartId

### 2. ูู `publicOrdersRoutes.js`:
```javascript
// ุงูุณุทุฑ 96: ุงูุชุญูู ูู ุงููุฎุฒูู ูุฏ ูุง ูุบุทู ุฌููุน ุงูุญุงูุงุช
if (!product || product.stock < item.quantity) {
```
**ุงูุญู**: ุงูุชุญูู ุฃูุถุงู ูู ูุชุบูุฑุงุช ุงูููุชุฌ (variants)

### 3. ูู `ProductDetails.tsx`:
```javascript
// ุงูุณุทุฑ 215: ุงุณุชุฎุฏุงู ุฑูู ุงููุงุชู ูู email fallback
guestEmail: formData.guestEmail || formData.guestPhone
```
**ุงูุญู**: ุงุณุชุฎุฏุงู ูููุฉ ุงูุชุฑุงุถูุฉ ุฃูุถู ุฃู ุงูุชุญูู ูู ุตุญุฉ ุงูุจุฑูุฏ

### 4. ูู `storefrontApi.ts`:
```javascript
// ุงูุณุทุฑ 114: ุงุณุชุฎุฏุงู localStorage ูุฏ ููุดู ูู ุจุนุถ ุงููุชุตูุญุงุช
const cartSessionId = localStorage.getItem('cart_session_id');
```
**ุงูุญู**: ุฅุถุงูุฉ try-catch ููุชุนุงูู ูุน ุงูุฃุฎุทุงุก

---

## ๐ ุฅุญุตุงุฆูุงุช ุงูููุฏ

- **Frontend Pages**: 7 ุตูุญุงุช ุฑุฆูุณูุฉ
- **Frontend Components**: 5 ููููุงุช
- **Backend Routes**: 3 ูููุงุช routes ุฑุฆูุณูุฉ
- **API Endpoints**: ~20 endpoint
- **Lines of Code**: ~3000+ ุณุทุฑ

---

## ๐ง ุชูุตูุงุช ููุชุญุณูู

### 1. ูุตูุฑุฉ ุงููุฏู
- [ ] ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุฃูุถู
- [ ] ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ ูููุณุชุฎุฏู
- [ ] ุฅุถุงูุฉ Loading States ุฃูุถู
- [ ] ุชุญุณูู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

### 2. ูุชูุณุทุฉ ุงููุฏู
- [ ] ุฅุถุงูุฉ Caching ููุจูุงูุงุช
- [ ] ุชุญุณูู ุฃุฏุงุก ุฌูุจ ุงูููุชุฌุงุช
- [ ] ุฅุถุงูุฉ Unit Tests
- [ ] ุชุญุณูู ุงูุชูุซูู

### 3. ุทูููุฉ ุงููุฏู
- [ ] ุฅุถุงูุฉ ุฏุนู ุงููุฏููุนุงุช ุงูุฅููุชุฑูููุฉ
- [ ] ุฅุถุงูุฉ ูุธุงู ุชููููุงุช ุงูููุชุฌุงุช
- [ ] ุฅุถุงูุฉ ูุธุงู ุงูุฅุดุนุงุฑุงุช
- [ ] ุชุญุณูู SEO

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

1. **ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ**: ุงููุธุงู ูุฏุนู ุงูุนุฑุจูุฉ ุจุดูู ุฌูุฏ ูุน RTL
2. **Responsive Design**: ุงููุงุฌูุฉ ูุชุฌุงูุจุฉ ูุน ุงูุดุงุดุงุช ุงููุฎุชููุฉ
3. **State Management**: ุงุณุชุฎุฏุงู React Hooks ูุฅุฏุงุฑุฉ ุงูุญุงูุฉ
4. **API Design**: RESTful API ูุน ุจููุฉ ูุงุถุญุฉ
5. **Database Schema**: ุงุณุชุฎุฏุงู Prisma ูุน schema ููุธู

---

## โ ุงูุฎูุงุตุฉ

ุงููุชุฌุฑ ุงูุฅููุชุฑููู ูุจูู ุจุดูู ุฌูุฏ ูุน ุจููุฉ ููุธูุฉ ูููุฒุงุช ุดุงููุฉ. ุงูููุฏ ูุธูู ูุณุจูุงู ูููู ูุญุชุงุฌ ุจุนุถ ุงูุชุญุณููุงุช ูู:
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุงูุฃุฏุงุก
- ุงูุฃูุงู
- ุงูุงุฎุชุจุงุฑุงุช

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูููู ููุถู ุฅุฌุฑุงุก ุงูุชุญุณููุงุช ุงููุฐููุฑุฉ ูุจู ุงููุดุฑ ูู ุงูุฅูุชุงุฌ.

---

**ุชุงุฑูุฎ ุงููุญุต**: ${new Date().toLocaleDateString('ar-EG')}
**ุงูุฅุตุฏุงุฑ**: 1.0

