# ๐ ุชุญููู ุดุงูู - ุทุฑููุฉ ุจูุงุก ุงูุฑุฏ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู

**ุชุงุฑูุฎ ุงูุชุญููู:** 2025-11-28  
**ุงููุฏู:** ุชุญููู ููุงุท ุงูููุฉ ูุงูุถุนู ูุงูุชุฑุงุญ ุงูุชุญุณููุงุช

---

## ๐ ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุนูููุฉ

### ุงููุฑุงุญู ุงูุฑุฆูุณูุฉ:

1. **ุชุญููู ุงูููุฉ (Intent Analysis)**
2. **ุฌูุจ ุงูุจูุงูุงุช (RAG & Memory)**
3. **ุจูุงุก ุงูู Prompt**
4. **ุชูููุฏ ุงูุฑุฏ (AI Generation)**
5. **ูุนุงูุฌุฉ ุงูุฑุฏ (Post-Processing)**
6. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก (Error Handling)**

---

## โ ููุงุท ุงูููุฉ

### 1. ุจูุงุก Prompt ูุชูุฏู ูููุตู โ

**ุงููููุน:** `responseGenerator.js` - `buildAdvancedPrompt()`

**ููุงุท ุงูููุฉ:**
- โ ุงุณุชุฎุฏุงู `personalityPrompt` ูุฎุตุต ููู ุดุฑูุฉ
- โ ุฏูุฌ ููุงุนุฏ ุงูุงุณุชุฌุงุจุฉ (Response Rules) ุจุดูู ุตุญูุญ
- โ ุฅุถุงูุฉ ูุนูููุงุช ุงูุดุญู ุชููุงุฆูุงู ุนูุฏ ุงูุญุงุฌุฉ
- โ ุชุญููู ุงูุณูุงู ุงูุนุงุทูู (emotional state, urgency level)
- โ ุชุนูููุงุช ูุงุถุญุฉ ููุฑุงุกุฉ ุงููุญุงุฏุซุฉ ูุจู ุงูุณุคุงู ุนู ูุนูููุงุช
- โ ููุน ุงูุชุฑุญูุจ ุงููุชูุฑุฑ ูู ุงููุญุงุฏุซุงุช ุงููุณุชูุฑุฉ
- โ ุฏุนู ูุนูููุงุช ุงูููุชุฌุงุช ูู ุงูุจูุณุชุงุช (post product info)
- โ ุฅุถุงูุฉ ูุนูููุงุช ุงูุนููู (ุฌุฏูุฏ/ุฑุงุฌุนุ ุนุฏุฏ ุงูุทูุจุงุช)

**ูุซุงู:**
```javascript
// โ ุฅุถุงูุฉ ููุงุนุฏ ุงูุงุณุชุฌุงุจุฉ
if (companyPrompts.responseRules) {
  const rulesPrompt = buildPromptFromRules(rules);
  prompt += rulesPrompt;
}

// โ ููุน ุงูุชุฑุญูุจ ุงููุชูุฑุฑ
if (conversationMemory && conversationMemory.length > 0) {
  prompt += `๐ซ๐ซ๐ซ ุชุญุฐูุฑ ููู ุฌุฏุงู - ููููุน ุงูุชุฑุญูุจ!\n`;
}
```

---

### 2. ูุธุงู ุฅุฏุงุฑุฉ ุงูููุงุฐุฌ ูุงูููุงุชูุญ ุงููุชูุฏู โ

**ุงููููุน:** `modelManager.js`

**ููุงุท ุงูููุฉ:**
- โ Round-Robin ูุชูุฒูุน ุงูุทูุจุงุช ุนูู ุงูููุงุชูุญ
- โ ุชุฌููุน ุงูููุชุฉ ูู ุฌููุน ุงูููุงุชูุญ ููููุฐุฌ ูุงุญุฏ
- โ ุงุณุชุซูุงุก ุงูููุงุชูุญ ุงููุณุชููุฏุฉ ุชููุงุฆูุงู
- โ ูุธุงู ุฃููููุงุช ููููุงุฐุฌ
- โ ุชุชุจุน ุงูุงุณุชุฎุฏุงู (RPM, RPH, RPD, TPM)
- โ Cache ููุชุญุณููุงุช ุงูุฃุฏุงุก

**ูุซุงู:**
```javascript
// โ Round-Robin selection
const selectedKey = availableKeys[index % availableKeys.length];
```

---

### 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุชูุฏูุฉ โ

**ุงููููุน:** `responseGenerator.js` - `generateAIResponse()`

**ููุงุท ุงูููุฉ:**
- โ Retry ูุน ููุงุฐุฌ ุจุฏููุฉ (fallback models)
- โ ุชุชุจุน ุงูููุงุฐุฌ ุงููุฌุฑุจุฉ ูุชุฌูุจ ุงูุชูุฑุงุฑ
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก 429 (Quota Exceeded) ุจุดูู ุตุญูุญ
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก 503 (Service Unavailable)
- โ ุงููุธุงู ุงูุตุงูุช ุนูุฏ ุงููุดู (Silent Mode)
- โ ุชุณุฌูู ุงูุฃุฎุทุงุก ูู `aiResponseMonitor`
- โ ุฅุดุนุงุฑุงุช ููุฑูุฉ ููุฃุฎุทุงุก ุงูุญุฑุฌุฉ

**ูุซุงู:**
```javascript
// โ ุชุชุจุน ุงูููุงุฐุฌ ุงููุฌุฑุจุฉ
this.globalTriedModels.set(sessionId, {
  models: new Set(),
  timestamp: Date.now()
});

// โ Retry ูุน ูููุฐุฌ ุจุฏูู
const backupModel = await this.aiAgentService.findNextAvailableModel(companyId, excludeModelsArray);
```

---

### 4. ุฏุนู API Versions ูุชุนุฏุฏุฉ โ

**ุงููููุน:** `responseGenerator.js` - `tryGenerateWithApiVersions()`

**ููุงุท ุงูููุฉ:**
- โ ุชุฌุฑุจุฉ ุฅุตุฏุงุฑุงุช API ูุชุนุฏุฏุฉ ุชููุงุฆูุงู (v1, v1beta)
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก 404/400 ุจุดูู ุตุญูุญ
- โ Fallback ุชููุงุฆู ุนูุฏ ูุดู ุฅุตุฏุงุฑ ูุนูู

**ูุซุงู:**
```javascript
const apiVersions = ['v1beta', 'v1'];
for (const apiVersion of apiVersions) {
  try {
    const response = await model.generateContent(prompt);
    return { response, apiVersion };
  } catch (error) {
    // Try next version
  }
}
```

---

### 5. ุฅุนุฏุงุฏุงุช ุชูููุฏ ุฏููุงููููุฉ โ

**ุงููููุน:** `responseGenerator.js` - `buildGenerationConfig()`

**ููุงุท ุงูููุฉ:**
- โ ุฅุนุฏุงุฏุงุช ูุฎุตุตุฉ ููู ุดุฑูุฉ (temperature, topK, topP, maxTokens)
- โ ุชุทุจูู ุฅุนุฏุงุฏุงุช ูุฎุชููุฉ ุญุณุจ ููุน ุงูุฑุณุงูุฉ
- โ ุงุณุชุฎุฏุงู ุงูููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุน fallback ููููู ุงูุงูุชุฑุงุถูุฉ

**ูุซุงู:**
```javascript
const baseConfig = {
  temperature: settings.aiTemperature ?? DEFAULT_AI_SETTINGS.TEMPERATURE,
  topK: settings.aiTopK ?? DEFAULT_AI_SETTINGS.TOP_K,
  topP: settings.aiTopP ?? DEFAULT_AI_SETTINGS.TOP_P,
  maxOutputTokens: settings.aiMaxTokens ?? DEFAULT_AI_SETTINGS.MAX_OUTPUT_TOKENS,
};
```

---

### 6. ุฏูุฌ RAG ู Memory ุจุดูู ุฌูุฏ โ

**ุงููููุน:** `messageProcessor.js`

**ููุงุท ุงูููุฉ:**
- โ ุฌูุจ ุงูุจูุงูุงุช ุฐุงุช ุงูุตูุฉ ูู RAG ุชููุงุฆูุงู
- โ ุงุณุชุฎุฏุงู ุณุฌู ุงููุญุงุฏุซุฉ (conversation memory)
- โ ููุชุฑุฉ ุงูุจูุงูุงุช ุญุณุจ ุงูููุฉ (intent)
- โ ุฏูุฌ ุงูุจูุงูุงุช ูู ุงูู prompt ุจุดูู ููุทูู

---

### 7. Pattern Enhancement โ

**ุงููููุน:** `responseGenerator.js` - `generateAIResponse()`

**ููุงุท ุงูููุฉ:**
- โ ุชุทุจูู ุงูุฃููุงุท ุงููุนุชูุฏุฉ (approved patterns) ุนูู ุงูู prompt
- โ ุชุญุณูู ุงูุฑุฏ ุญุณุจ ููุน ุงูุฑุณุงูุฉ
- โ ุฏุนู ุฃููุงุท ูุฎุตุตุฉ ููู ุดุฑูุฉ

---

## โ๏ธ ููุงุท ุงูุถุนู

### 1. ุทูู ุงูู Prompt ุงูููุฑุท โ๏ธ

**ุงููุดููุฉ:**
- ุงูู prompt ูููู ุฃู ูููู ุทูููุงู ุฌุฏุงู (7000+ ุญุฑู)
- ุฅุถุงูุฉ ูุนูููุงุช ูุซูุฑุฉ ูุฏ ุชุณุจุจ:
  - ุงุณุชููุงู tokens ูุจูุฑ
  - ุจุทุก ูู ุงูุงุณุชุฌุงุจุฉ
  - ุตุนูุจุฉ ูู ุงูุชุฑููุฒ ุนูู ุงููุนูููุงุช ุงููููุฉ

**ุงููููุน:** `responseGenerator.js` - `buildAdvancedPrompt()`

**ุงูุชุฃุซูุฑ:**
- โ๏ธ ุชูููุฉ ุฃุนูู (tokens)
- โ๏ธ ููุช ุงุณุชุฌุงุจุฉ ุฃุทูู
- โ๏ธ ูุฏ ูุดุชุช AI ุนู ุงููุนูููุงุช ุงููููุฉ

---

### 2. Retry Logic ุบูุฑ ูุชุณู โ๏ธ

**ุงููุดููุฉ:**
- ูู `messageProcessor.js`ุ retry ูุณุชุฎุฏู `buildAdvancedPrompt` โ
- ููู ูู ุจุนุถ ุงูุญุงูุงุชุ retry ูุณุชุฎุฏู prompt ุจุณูุท โ
- ูุง ููุฌุฏ ุญุฏ ุฃูุตู ูุงุถุญ ูุนุฏุฏ ุงููุญุงููุงุช

**ุงููููุน:** `messageProcessor.js` - ุงูุณุทุฑ 928-1014

**ุงูุชุฃุซูุฑ:**
- โ๏ธ ุฑุฏูุฏ retry ูุฏ ุชููู ุฃูู ุฌูุฏุฉ
- โ๏ธ ุนุฏู ุงุณุชุบูุงู ููุงุนุฏ ุงูุงุณุชุฌุงุจุฉ ูู retry

---

### 3. ุนุฏู ูุฌูุฏ Caching ููู Prompts โ๏ธ

**ุงููุดููุฉ:**
- ูุชู ุจูุงุก ุงูู prompt ูู ุงูุตูุฑ ูู ูู ูุฑุฉ
- ูุง ููุฌุฏ cache ููู prompts ุงููุจููุฉ
- ุฅุนุงุฏุฉ ุจูุงุก ููุณ ุงูู prompt ุนุฏุฉ ูุฑุงุช

**ุงูุชุฃุซูุฑ:**
- โ๏ธ ููุช ุฅุถุงูู ูู ุจูุงุก ุงูู prompt
- โ๏ธ ุงุณุชููุงู ููุงุฑุฏ ุบูุฑ ุถุฑูุฑู

---

### 4. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุนูุฏุฉ โ๏ธ

**ุงููุดููุฉ:**
- ููุฏ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ููุฒุน ูู ุนุฏุฉ ุฃูุงูู
- ุตุนูุจุฉ ูู ุชุชุจุน ุชุฏูู ุงูุฃุฎุทุงุก
- ุจุนุถ ุงูุฃุฎุทุงุก ูุฏ ูุง ูุชู ูุนุงูุฌุชูุง ุจุดูู ุตุญูุญ

**ุงููููุน:** `responseGenerator.js`, `messageProcessor.js`

**ุงูุชุฃุซูุฑ:**
- โ๏ธ ุตุนูุจุฉ ูู ุงูุตูุงูุฉ
- โ๏ธ ูุฏ ุชููุช ุจุนุถ ุญุงูุงุช ุงูุฎุทุฃ

---

### 5. ุนุฏู ูุฌูุฏ Validation ููู Response โ๏ธ

**ุงููุดููุฉ:**
- ูุง ููุฌุฏ validation ุดุงูู ููุฑุฏ ุจุนุฏ ุชูููุฏู
- ููุท ูุญุต ุทูู ุงูุฑุฏ (10 ุญุฑูู)
- ูุง ููุฌุฏ ูุญุต ููุฌูุฏุฉ ุฃู ุงูููุงุกูุฉ

**ุงููููุน:** `messageProcessor.js` - ุงูุณุทุฑ 920-924

**ุงูุชุฃุซูุฑ:**
- โ๏ธ ูุฏ ูุชู ุฅุฑุณุงู ุฑุฏูุฏ ุบูุฑ ููุงุณุจุฉ
- โ๏ธ ูุง ููุฌุฏ ุถูุงู ููุฌูุฏุฉ

---

### 6. Logging ููุฑุท โ๏ธ

**ุงููุดููุฉ:**
- ุนุฏุฏ ูุจูุฑ ูู console.log statements
- ูุฏ ูุคุซุฑ ุนูู ุงูุฃุฏุงุก ูู ุงูุฅูุชุงุฌ
- ุตุนูุจุฉ ูู ุชุชุจุน ุงูุฃุฎุทุงุก ุงููููุฉ

**ุงูุชุฃุซูุฑ:**
- โ๏ธ ุฃุฏุงุก ุฃุจุทุฃ ููููุงู
- โ๏ธ ุตุนูุจุฉ ูู ุงููุฑุงุกุฉ

---

### 7. ุนุฏู ูุฌูุฏ Rate Limiting ููู Prompts โ๏ธ

**ุงููุดููุฉ:**
- ูุง ููุฌุฏ rate limiting ูุจูุงุก ุงูู prompts
- ูุฏ ูุชู ุจูุงุก prompts ูุชุนุฏุฏุฉ ูู ููุณ ุงูููุช
- ูุฏ ูุณุจุจ ุงุณุชููุงู ููุงุฑุฏ ูุจูุฑ

**ุงูุชุฃุซูุฑ:**
- โ๏ธ ุงุณุชููุงู ููุงุฑุฏ ุบูุฑ ุถุฑูุฑู
- โ๏ธ ูุฏ ูุณุจุจ ุจุทุก ูู ุงููุธุงู

---

## ๐ ุงูุชุญุณููุงุช ุงูููุชุฑุญุฉ

### 1. ุชุญุณูู ุทูู ุงูู Prompt ๐

**ุงูุชุญุณูู:**
- โ ุชูููู ุงููุนูููุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ
- โ ุงุณุชุฎุฏุงู ููุฎุตุงุช ุจุฏูุงู ูู ุงููุตูุต ุงููุงููุฉ
- โ ุฅุถุงูุฉ ุฃููููุงุช ูููุนูููุงุช (ูููุฉ ุฌุฏุงูุ ูููุฉุ ุงุฎุชูุงุฑูุฉ)
- โ ุชูููู ุนุฏุฏ ุงูุฑุณุงุฆู ูู conversation memory (ูุซูุงู 10 ุจุฏูุงู ูู 50)

**ุงูููุฏ ุงูููุชุฑุญ:**
```javascript
// โ ุชูููู conversation memory
const memoryLimit = Math.min(settings.maxMessagesPerConversation || 10, 10);

// โ ุฅุถุงูุฉ ููุฎุตุงุช
if (conversationMemory.length > 10) {
  prompt += `๐ ููุฎุต ุงููุญุงุฏุซุฉ (ุขุฎุฑ 10 ุฑุณุงุฆู):\n`;
  // ... ุขุฎุฑ 10 ุฑุณุงุฆู ููุท
} else {
  prompt += `๐ ุณุฌู ุงููุญุงุฏุซุฉ ุงููุงูู:\n`;
  // ... ุฌููุน ุงูุฑุณุงุฆู
}
```

**ุงูุชุฃุซูุฑ ุงููุชููุน:**
- โ ุชูููู ุทูู ุงูู prompt ุจูุณุจุฉ 30-40%
- โ ุชูููู ุงุณุชููุงู tokens
- โ ุชุญุณูู ููุช ุงูุงุณุชุฌุงุจุฉ

---

### 2. ุชุญุณูู Retry Logic ๐

**ุงูุชุญุณูู:**
- โ ุชูุญูุฏ retry logic ูู ููุงู ูุงุญุฏ
- โ ุงุณุชุฎุฏุงู `buildAdvancedPrompt` ูู ุฌููุน ุญุงูุงุช retry
- โ ุฅุถุงูุฉ ุญุฏ ุฃูุตู ูุงุถุญ ูุนุฏุฏ ุงููุญุงููุงุช (3 ูุญุงููุงุช)
- โ ุชุญุณูู prompt ูู retry (ุชูููู ุงููุนูููุงุช)

**ุงูููุฏ ุงูููุชุฑุญ:**
```javascript
const MAX_RETRY_ATTEMPTS = 3;
let retryCount = 0;

while (retryCount < MAX_RETRY_ATTEMPTS) {
  try {
    const retryPrompt = await this.buildAdvancedPrompt(/* ... */);
    const response = await this.generateAIResponse(retryPrompt, /* ... */);
    if (response && response.length > 10) {
      return response;
    }
  } catch (error) {
    retryCount++;
    if (retryCount >= MAX_RETRY_ATTEMPTS) {
      throw error;
    }
  }
}
```

**ุงูุชุฃุซูุฑ ุงููุชููุน:**
- โ ุฑุฏูุฏ retry ุฃูุถู ุฌูุฏุฉ
- โ ุงุณุชุฎุฏุงู ููุงุนุฏ ุงูุงุณุชุฌุงุจุฉ ูู retry
- โ ุชูููู ุงูุฃุฎุทุงุก

---

### 3. ุฅุถุงูุฉ Caching ููู Prompts ๐

**ุงูุชุญุณูู:**
- โ Cache ููู prompts ุงููุจููุฉ (TTL: 5 ุฏูุงุฆู)
- โ Cache key: `companyId + customerMessage + conversationMemory.length`
- โ ุฅุจุทุงู Cache ุนูุฏ ุชุญุฏูุซ ููุงุนุฏ ุงูุงุณุชุฌุงุจุฉ

**ุงูููุฏ ุงูููุชุฑุญ:**
```javascript
class PromptCache {
  constructor() {
    this.cache = new Map();
    this.TTL = 5 * 60 * 1000; // 5 ุฏูุงุฆู
  }
  
  getKey(companyId, customerMessage, memoryLength) {
    return `${companyId}_${customerMessage.substring(0, 50)}_${memoryLength}`;
  }
  
  get(key) {
    const cached = this.cache.get(key);
    if (cached && (Date.now() - cached.timestamp) < this.TTL) {
      return cached.prompt;
    }
    return null;
  }
  
  set(key, prompt) {
    this.cache.set(key, { prompt, timestamp: Date.now() });
  }
}
```

**ุงูุชุฃุซูุฑ ุงููุชููุน:**
- โ ุชูููู ููุช ุจูุงุก ุงูู prompt ุจูุณุจุฉ 50-70%
- โ ุชุญุณูู ุงูุฃุฏุงุก ุงูุนุงู

---

### 4. ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ๐

**ุงูุชุญุณูู:**
- โ ุชูุญูุฏ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู class ูุงุญุฏ
- โ ุชุตููู ุงูุฃุฎุทุงุก ุจุดูู ุฃูุถู
- โ ุฅุถุงูุฉ retry ุชููุงุฆู ููุฃุฎุทุงุก ุงููุงุจูุฉ ููุงุณุชุฑุฏุงุฏ

**ุงูููุฏ ุงูููุชุฑุญ:**
```javascript
class ErrorHandler {
  classifyError(error) {
    if (error.status === 429) return 'quota_exceeded';
    if (error.status === 503) return 'service_unavailable';
    if (error.status === 401) return 'auth_error';
    return 'unknown_error';
  }
  
  isRetryable(error) {
    const retryableErrors = ['quota_exceeded', 'service_unavailable', 'timeout'];
    return retryableErrors.includes(this.classifyError(error));
  }
}
```

**ุงูุชุฃุซูุฑ ุงููุชููุน:**
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุฃูุถู
- โ ุชูููู ุงูุฃุฎุทุงุก ุบูุฑ ุงููุนุงูุฌุฉ

---

### 5. ุฅุถุงูุฉ Validation ููู Response ๐

**ุงูุชุญุณูู:**
- โ ูุญุต ุทูู ุงูุฑุฏ (minimum, maximum)
- โ ูุญุต ุงูุฌูุฏุฉ (ูุญุชูู ูููุฏุ ููุณ ุชูุฑุงุฑ)
- โ ูุญุต ุงูููุงุกูุฉ (ูุชุนูู ุจุงูููุถูุน)
- โ ูุญุต ุงููุบุฉ (ุนุฑุจู ุตุญูุญ)

**ุงูููุฏ ุงูููุชุฑุญ:**
```javascript
class ResponseValidator {
  validate(response, context) {
    const errors = [];
    
    // โ ูุญุต ุงูุทูู
    if (response.length < 10) {
      errors.push('response_too_short');
    }
    if (response.length > 2000) {
      errors.push('response_too_long');
    }
    
    // โ ูุญุต ุงูุฌูุฏุฉ
    if (this.isRepetitive(response)) {
      errors.push('response_repetitive');
    }
    
    // โ ูุญุต ุงูููุงุกูุฉ
    if (!this.isRelevant(response, context)) {
      errors.push('response_not_relevant');
    }
    
    return {
      valid: errors.length === 0,
      errors
    };
  }
}
```

**ุงูุชุฃุซูุฑ ุงููุชููุน:**
- โ ุฑุฏูุฏ ุฃูุถู ุฌูุฏุฉ
- โ ุชูููู ุงูุฑุฏูุฏ ุบูุฑ ุงูููุงุณุจุฉ

---

### 6. ุชุญุณูู Logging ๐

**ุงูุชุญุณูู:**
- โ ุงุณุชุฎุฏุงู logging library (ูุซู Winston)
- โ ูุณุชููุงุช logging (debug, info, warn, error)
- โ ุชูููู logging ูู ุงูุฅูุชุงุฌ
- โ ุฅุถุงูุฉ request ID ูุชุชุจุน ุงูุทูุจุงุช

**ุงูููุฏ ุงูููุชุฑุญ:**
```javascript
const logger = require('./logger'); // Winston or similar

// โ ุจุฏูุงู ูู console.log
logger.debug('๐ [AI-RESPONSE] ุจุฏุก ุชูููุฏ ุฑุฏ', { companyId, conversationId });

// โ ูู ุงูุฅูุชุงุฌุ ููุท error ู warn
if (process.env.NODE_ENV === 'production') {
  logger.level = 'warn';
}
```

**ุงูุชุฃุซูุฑ ุงููุชููุน:**
- โ ุฃุฏุงุก ุฃูุถู
- โ ุชุชุจุน ุฃุณูู ููุฃุฎุทุงุก

---

### 7. ุฅุถุงูุฉ Rate Limiting ๐

**ุงูุชุญุณูู:**
- โ Rate limiting ูุจูุงุก ุงูู prompts
- โ Queue ููุทูุจุงุช ุงููุชุนุฏุฏุฉ
- โ Priority queue ููุทูุจุงุช ุงูุนุงุฌูุฉ

**ุงูููุฏ ุงูููุชุฑุญ:**
```javascript
class PromptBuilderQueue {
  constructor() {
    this.queue = [];
    this.processing = false;
    this.maxConcurrent = 3;
  }
  
  async add(request, priority = 'normal') {
    return new Promise((resolve, reject) => {
      this.queue.push({ request, priority, resolve, reject });
      this.process();
    });
  }
  
  async process() {
    if (this.processing || this.queue.length === 0) return;
    
    this.processing = true;
    // Process queue...
    this.processing = false;
  }
}
```

**ุงูุชุฃุซูุฑ ุงููุชููุน:**
- โ ุงุณุชููุงู ููุงุฑุฏ ุฃูุถู
- โ ููุน ุงูุญูู ุงูุฒุงุฆุฏ

---

## ๐ ููุฎุต ุงูุชุญุณููุงุช

### ุงูุฃููููุฉ ุงูุนุงููุฉ (High Priority):

1. โ **ุชุญุณูู ุทูู ุงูู Prompt** - ุชูููู 30-40%
2. โ **ุชุญุณูู Retry Logic** - ุชูุญูุฏ ูุงุณุชุฎุฏุงู buildAdvancedPrompt
3. โ **ุฅุถุงูุฉ Validation ููู Response** - ุถูุงู ุงูุฌูุฏุฉ

### ุงูุฃููููุฉ ุงููุชูุณุทุฉ (Medium Priority):

4. โ **ุฅุถุงูุฉ Caching ููู Prompts** - ุชุญุณูู ุงูุฃุฏุงุก
5. โ **ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก** - ุชูุญูุฏ ูุชุญุณูู
6. โ **ุชุญุณูู Logging** - ุงุณุชุฎุฏุงู library ููุงุณุจ

### ุงูุฃููููุฉ ุงูููุฎูุถุฉ (Low Priority):

7. โ **ุฅุถุงูุฉ Rate Limiting** - ุชุญุณูู ุงุณุชููุงู ุงูููุงุฑุฏ

---

## ๐ฏ ุงูุฎูุงุตุฉ

### ููุงุท ุงูููุฉ ุงูุฑุฆูุณูุฉ:
- โ ุจูุงุก prompt ูุชูุฏู ูููุตู
- โ ูุธุงู ุฅุฏุงุฑุฉ ููุงุฐุฌ ูููุงุชูุญ ูุชูุฏู
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุฌูุฏุฉ
- โ ุฏุนู API versions ูุชุนุฏุฏุฉ

### ููุงุท ุงูุถุนู ุงูุฑุฆูุณูุฉ:
- โ๏ธ ุทูู ุงูู prompt ุงูููุฑุท
- โ๏ธ retry logic ุบูุฑ ูุชุณู
- โ๏ธ ุนุฏู ูุฌูุฏ caching
- โ๏ธ ุนุฏู ูุฌูุฏ validation ุดุงูู

### ุงูุชุญุณููุงุช ุงูููุตู ุจูุง:
- ๐ ุชุญุณูู ุทูู ุงูู prompt (ุฃููููุฉ ุนุงููุฉ)
- ๐ ุชุญุณูู retry logic (ุฃููููุฉ ุนุงููุฉ)
- ๐ ุฅุถุงูุฉ validation (ุฃููููุฉ ุนุงููุฉ)
- ๐ ุฅุถุงูุฉ caching (ุฃููููุฉ ูุชูุณุทุฉ)

---

**ุชู ุฅูุดุงุก ูุฐุง ุงูุชูุฑูุฑ ุจูุงุณุทุฉ:** AI Assistant  
**ุงูุชุงุฑูุฎ:** 2025-11-28

